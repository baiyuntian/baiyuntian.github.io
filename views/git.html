<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../css/style.css" />
</head>
<body class="git">
    <div class="html_head">
        <div class="top">
            <p><span>白梦超个人博客</span>前端开发大海中的一朵浪花</p>
        </div>
        <div class="nav">
            <ul class="nav">
                <li><a href="/">首页</a></li>
                <li><a href="">HTML</a></li>
                <li><a href="">CSS</a></li>
                <li><a href="">JS</a></li>
                <li class="on"><a href="/views/git.html">GIT</a></li>
                <li><a href="/views/case.html">CASE</a></li>
            </ul>
        </div>
    </div>
    <section class="main">
        <div class="title">
            <h2>git 指令操作</h2>
            <hr>
            <ul>
                <li><a href="#git_clone">git clone</a></li>
                <li><a href="#git_remote">git remote</a></li>
                <li><a href="#git_fetch">git fetch</a></li>
                <li><a href="#git_pull">git pull</a></li>
                <li><a href="#git_push">git push</a></li>
                <li><a href="#git_tag">git tag</a></li>
                <li><a href="#git_branch">git branch</a></li>
                <li><a href="#git_checkout">git checkout</a></li>
            </ul>
        </div>
        <div class="directive" id="git_clone">
            <h3 class="directive_title">一 、git clone</h3>
            <hr>
            <p>远程操作的第一步，通常是从远程主机克隆一个版本库，这时就要用到<span class="color">git clone</span>命令。</p>
            <div class="code">
                <pre><code>$ git clone &lt;版本库网址&gt;</code></pre>
            </div>
            <p>比如，克隆jQuery的版本库。</p>
            <div class="code">
                <pre><code>$ git clone https://github.com/jquery/jquery.git</code></pre>
            </div>
            <p>此命令会在本地生成一个与主机版本库同名的的库。如果要指定不同的目录名，可以将目录名作为<span class="color">git clone</span>命令的第二个参数</p>
            <div class="code">
                <pre><code>$ git clone &lt;版本库网址&gt; &lt;本地库名&gt;</code></pre>
            </div>
            <p><span class="color">git clone</span>支持多种协议，除了HTTP(s)以外，还支持SSH、Git等一些其他协议，下面以jquery的版本库为例：</p>
            <div class="code">
                <pre><code>$ git clone https://github.com/jquery/jquery.git<br>$ git clone ssh://github.com/jquery/jquery.git<br>$ git clone git://github.com/jquery/jquery.git<br>$ git clone git@github.com:jquery/jquery.git
                 </code></code></pre>
            </div>
        </div>

        <div class="directive" id="git_remote">
            <h3 class="directive_title">二 、git remote</h3>
            <hr>
            <p>为了便于管理，Git要求每个远程主机都必须指定一个主机名。<span class="color">git remote</span>命令就用于管理主机名。<p>
            <p>不带选项的时候，git remote命令列出所有远程主机。</p>
            <div class="code">
                <pre><code>$ git remote<br><span>origin</code></pre>
            </div>
            <p>使用<span class="color">-v</span>选项，可以参看远程主机的网址</p>
            <div class="code">
                <pre><code>$ git remote -v<br>origin  git@github.com:jquery/jquery.git (fetch)<br>origin  git@github.com:jquery/jquery.git (push)</code></pre>
            </div>
            <p>上面命令表示，当前只有一台远程主机，叫做<span class="color">origin</span>，以及它的网址。</p>
            <p>隆版本库的时候，所使用的远程主机自动被Git命名为<span class="color">origin</span>。如果想用其他的主机名，需要用<span class="color">git clone</span>命令的-o选项指定</p>
            <div class="code">
                <pre><code>$ git clone -o jQuery https://github.com/jquery/jquery.git</code><br>$ git remote<br>jQuery</code></pre>
            </div>
            <p>上面命令表示，克隆的时候，指定远程主机叫做<span class="color">jQuery</span>。</p>
            <p><span class="color">git remote show</span>命令加上主机名，可以查看该主机的详细信息。</p>
            <div class="code">
                <pre><code>$ git remote show &lt;主机名&gt;</code></code></pre>
            </div>
            <p><span class="color">git remote add</span>命令用于添加远程主机。还可以建立本地库与远程的连接</p>
            <div class="code">
                <pre><code>$ git remote add &lt;主机名&gt; &lt;网址&gt;<br>$ git remote add origin https://github.com/jquery/jquery.git<br>$ git remote add origin git@github.com:jquery/jquery.git</code></code></pre>
            </div>
            <p><span class="color">git remote rm</span>命令用于删除远程主机。</p>
            <div class="code">
                <pre><code>$ git remote rm &lt;主机名&gt;</code></code></pre>
            </div>
            <p><span class="color">git remote remove</span>取消本地库与远程连接。</p>
            <div class="code">
                <pre><code>$ git remote remove &lt;主机名&gt;</code></code></pre>
            </div>
            <p><span class="color">git remote rename</span>命令用于远程主机的改名。</p>
            <div class="code">
                <pre><code>$ git remote rename &lt;原主机名&gt; &lt;新主机名&gt;</code></code></pre>
            </div>
        </div>

        <div class="directive" id="git_fetch">
            <h3 class="directive_title">三 、git fetch</h3>
            <hr>
            <p>一旦远程主机的版本库有了更新（Git术语叫做commit），需要将这些更新取回本地，这时就要用到<span class="color">git fetch</span>命令。<p>
            <div class="code">
                <pre><code>$ git fetch &lt;远程主机名&gt;</code></pre>
            </div>
            <p>上面命令将某个远程主机的更新，全部取回本地。</p>
            <p><span class="color">git fetch</span>命令通常用来查看其他人的进程，因为它取回的代码对你本地的开发代码没有影响。</p>
            <p>默认情况下，<span class="color">git fetch</span>取回所有分支（branch）的更新。如果只想取回特定分支的更新，可以指定分支名。</p>
            <div class="code">
                <pre><code>$ git fetch &lt;远程主机名&gt; &lt;分支名&gt;</code></pre>
            </div>
            <p>比如，取回<span class="color">origin</span>主机的<span class="color">master</span>分支。</p>
            <div class="code">
                <pre><code>$ git fetch origin master</code></pre>
            </div>
            <p>所取回的更新，在本地主机上要用"远程主机名/分支名"的形式读取。比如<span class="color">origin</span>主机的<span class="color">master</span>，就要用origin/master读取。</p>
            <p><span class="color">git branch</span>命令的<span class="color">-r</span>选项，可以用来查看远程分支，<span class="color">-a</span>选项查看所有分支,<span class="color">git branch</span>不加参数查看本地分支。</p>
            <div class="code">
                <pre><code>$ git branch -r<br>origin/master<br><br>$ git branch -a<br>* master<br>  remotes/origin/master<br><br>$ git branch<br>* master</code></code></pre>
            </div>
            <p>上面命令表示，本地主机的当前分支是<span class="color">master</span>，远程分支是<span class="color">origin/master</span>。</p>
            <p>取回远程主机的更新以后，可以在它的基础上，使用<span class="color">git checkout</span>命令创建一个新的分支。</p>
            <div class="code">
                <pre><code>$ git checkout -b newBrach origin/master</code></pre>
            </div>
            <p>上面命令表示，在<span class="color">origin/master</span>的基础上，创建一个新分支。</p>
            <p>此外，也可以使用<span class="color">git merge</span>命令或者<span class="color">git rebase</span>命令，在本地分支上合并远程分支。</p>
            <div class="code">
                <pre><code>$ git merge origin/master<br># 或者<br>$ git rebase origin/master</code></pre>
            </div>
            <p>上面命令表示在当前分支上，合并<span class="color">origin/master</span>。</p>
        </div>

        <div class="directive" id="git_pull">
            <h3 class="directive_title">四 、git pull</h3>
            <hr>
            <p><span class="color">git pull</span>命令的作用是，取回远程主机某个分支的更新，再与本地的指定分支合并。它的完整格式稍稍有点复杂。<p>
            <div class="code">
                <pre><code>$ git pull &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</code></pre>
            </div>
            <p>比如，取回<span class="color">origin</span>主机的<span class="color">next</span>分支，与本地的<span class="color">master</span>分支合并，需要写成下面这样。</p>
            <div class="code">
                <pre><code>$ git pull origin next:master</code></pre>
            </div>
            <p>如果远程分支是与当前分支合并，则冒号后面的部分可以省略。</p>
            <div class="code">
                <pre><code>$ git pull origin next</code></pre>
            </div>
            <p>上面命令表示，取回<span class="color">origin/next</span>分支，再与当前分支合并。实质上，这等同于先做<span class="color">git fetch</span>，再做<span class="color">git merge</span>。</p>
            <div class="code">
                <pre><code>$ git fetch origin<br>$ git merge origin/next</code></pre>
            </div>
            <p>在某些场合，Git会自动在本地分支与远程分支之间，建立一种追踪关系（tracking）。比如，在<span class="color">git clone</span>的时候，所有本地分支默认与远程主机的同名分支，建立追踪关系，也就是说，本地的<span class="color">master</span>分支自动"追踪"<span class="color">origin/master</span>分支。</p>
            <p>Git也允许手动建立追踪关系。</p>
            <div class="code">
                <pre><code>git branch --set-upstream master origin/next</code></pre>
            </div>
            <p>上面命令指定<span class="color">master</span>分支追踪<span class="color">origin/next</span>分支。</p>
            <p>如果当前分支与远程分支存在追踪关系，<span class="color">git pull</span>就可以省略远程分支名。</p>
            <div class="code">
                <pre><code>$ git pull origin</code></pre>
            </div>
            <p>上面命令表示，本地的当前分支自动与对应的<span class="color">origin</span>主机"追踪分支"（remote-tracking branch）进行合并。</p>
            <p>如果当前分支只有一个追踪分支，连远程主机名都可以省略。</p>
            <div class="code">
                <pre><code>$ git pull</code></pre>
            </div>
            <p>上面命令表示，当前分支自动与唯一一个追踪分支进行合并。</p>
            <p>如果合并需要采用rebase模式，可以使用<span class="color">--rebase</span>选项。</p>
            <div class="code">
                <pre><code>$ git pull --rebase &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</code></pre>
            </div>
            <p>如果远程主机删除了某个分支，默认情况下，<span class="color">git pull</span> 不会在拉取远程分支的时候，删除对应的本地分支。这是为了防止，由于其他人操作了远程主机，导致<span class="color">git pull</span>不知不觉删除了本地分支。</p>
            <p>但是，你可以改变这个行为，加上参数 <span class="color">-p </span>就会在本地删除远程已经删除的分支。</p>
            <div class="code">
                <pre><code>$ git pull -p<br># 等同于下面的命令<br>$ git fetch --prune origin<br>$ git fetch -p</code></pre>
            </div>
        </div>

        <div class="directive" id="git_push">
            <h3 class="directive_title">五 、git push</h3>
            <hr>
            <p><span class="color">git push</span>命令用于将本地分支的更新，推送到远程主机。它的格式与<span class="color">git pull</span>命令相仿。<p>
            <div class="code">
                <pre><code>$ git push &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</code></pre>
            </div>
            <p>注意，分支推送顺序的写法是&lt;来源地&gt;:&lt;目的地&gt;，所以<span class="color">git pull</span>是&lt;远程分支&gt;:&lt;本地分支&gt;，而<span class="color">git push</span>是&lt;本地分支&gt;:&lt;远程分支&gt;。</p>
            <p>如果省略远程分支名，则表示将本地分支推送与之存在"追踪关系"的远程分支（通常两者同名），如果该远程分支不存在，则会被新建。</p>
            <div class="code">
                <pre><code>$ git push origin master</code></pre>
            </div>
            <p>上面命令表示，将本地的master分支推送到<span class="color">origin</span>主机的<span class="color">master</span>分支。如果后者不存在，则会被新建。</p>
            <p>如果省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支。</p>
            <div class="code">
                <pre><code>$ git push origin :master<br># 等同于<br>$ git push origin --delete master</code></pre>
            </div>
            <p>上面命令表示删除<span class="color">origin</span>主机的<span class="color">master</span>分支。</p>
            <p>如果当前分支与远程分支之间存在追踪关系，则本地分支和远程分支都可以省略。</p>
            <div class="code">
                <pre><code>$ git push origin</code></pre>
            </div>
            <p>如果当前分支与多个主机存在追踪关系，则可以使用<span class="color">-u</span>选项指定一个默认主机，这样后面就可以不加任何参数使用<span class="color">git push</span>。</p>
            <div class="code">
                <pre><code>$ git push -u origin master</code></pre>
            </div>
            <p>Git也允许手动建立追踪关系。</p>
            <div class="code">
                <pre><code>git branch --set-upstream master origin/next</code></pre>
            </div>
            <p>上面命令将本地的<span class="color">master</span>分支推送到<span class="color">origin</span>主机，同时指定<span class="color">origin</span>为默认主机，后面就可以不加任何参数使用<span class="color">git push</span>了。</p>
            <p>不带任何参数的<span class="color">git push</span>，默认只推送当前分支，这叫做simple方式。此外，还有一种matching方式，会推送所有有对应的远程分支的本地分支。Git 2.0版本之前，默认采用matching方法，现在改为默认采用simple方式。如果要修改这个设置，可以采用<span class="color">git config</span>命令。</p>
            <div class="code">
                <pre><code>$ git config --global push.default matching<br># 或者<br>$ git config --global push.default simple</code></pre>
            </div>
            <p>还有一种情况，就是不管是否存在对应的远程分支，将本地的所有分支都推送到远程主机，这时需要使用<span class="color">--all</span>选项。</p>
            <div class="code">
                <pre><code>$ git push --all origin</code></pre>
            </div>
            <p>上面命令表示，将所有本地分支都推送到<span class="color">origin</span>主机。</p>
            <p>如果远程主机的版本比本地版本更新，推送时Git会报错，要求先在本地做<span class="color">git pull</span>合并差异，然后再推送到远程主机。这时，如果你一定要推送，可以使用<span class="color">--force</span>选项。</p>
            <div class="code">
                <pre><code>$ git push --force origin</code></pre>
            </div>
            <p>上面命令使用<span class="color">--force</span>选项，结果导致远程主机上更新的版本被覆盖。除非你很确定要这样做，否则应该尽量避免使用<span class="color">--force</span>选项。</p>
            <p>最后，<span class="color">git push</span>不会推送标签（tag），除非使用<span class="color">--tags</span>选项。</p>
            <div class="code">
                <pre><code>$ git push origin --tags</code></pre>
            </div>
        </div>

        <div class="directive" id="git_tag">
            <h3 class="directive_title">六 、git tag</h3>
            <hr>
            <p><span class="color">git tag</span>命令用于创建标签，也就是我们说的版本号<p>
            <div class="code">
                <pre><code>$ git tag v1.0.0</code></pre>
            </div>
            <p>上面创建了一个 v1.0.0 的标签<p>
            <p><span class="color">git tag</span>不加任何参数，显示当前分支所有标签<p>
            <div class="code">
                <pre><code>$ git tag<br>v1.0.0</code></pre>
            </div>
            <p>将标签推送到远程使用 <span class="color">git push</span><p>
            <div class="code">
                <pre><code>git push &lt;远程主机&gt; &lt;标签&gt;<br>git push origin v1.0.0</code></pre>
            </div>
            <p>上面代码将v1.0.0标签推送到远程，如果远程存在此标签，那么覆盖之前内容，还可以一次性将本地标签全部推送到远程<p>
            <div class="code">
                <pre><code>git push origin --tags</code></pre>
            </div>
            <p><span class="color">git tag</span>添加 <span class="color">-d</span> 参数用于删除本地标签<p>
            <div class="code">
                <pre><code>git tag -d &lt;标签名&gt;</code></pre>
            </div>
            <p>删除远程标签<p>
            <div class="code">
                <pre><code>git push &lt;远程主机&gt; --delete tag &lt;要删除的标签&gt;<br>git push origin --delete tag 1.0.0</code></pre>
            </div>
        </div>

        <div class="directive" id="git_branch">
            <h3 class="directive_title">七 、git branch</h3>
            <hr>
            <p><span class="color">git branch</span>命令用于创建分支，在本地创建一个 <span class="color">dev</span>分支<p>
            <div class="code">
                <pre><code>$ git branch dev</code></pre>
            </div>
            <p><span class="color">git branch</span>不加任何参数显示本地分支，参数<span class="color">-r</span>显示远程分支，参数<span class="color">-a</span>显示本地和远程分支<p>
            <div class="code">
                <pre><code>$ git branch<br>*master<br>dev<br><br>$ git branch -r<br>remotes/origin/master<br><br>$ git branch -a<br>*master<br>dev<br>remotes/origin/master</code></pre>
            </div>
            <p>*表示当前所在分支。</p>
            <p><span class="color">git branch -d</span>删除本地分支<p>
            <div class="code">
                <pre><code>$git branch -d &lt;分支名&gt;<br>$git branch -d dev<br>$git branch<br>*master </code></pre>
            </div>
            <p><span class="color">git branch -m</span>分支重命名<p>
            <div class="code">
                <pre><code>$git branch -m &lt;旧分支名&gt; &lt;新分支名&gt;<br>$git branch -m dev dev1</code></pre>
            </div>
            <p>上面代码将<span class="color">dev</span>分支重命名为<span class="color">dev1</span><p>
        </div>

        <div class="directive" id="git_checkout">
            <h3 class="directive_title">八 、git checkout</h3>
            <hr>
            <p><span class="color">git checkout</span>命令用于切换分支，将分支切换到dev<p>
            <div class="code">
                <pre><code>$ git checkout dev<br>$ git branch<br>*dev<br>master</code></pre>
            </div>
            <p><span class="color">git checkout -b</span>创建并切换到新分支</p>
            <div class="code">
                <pre><code>$ git branch<br>*master<br><br>$ git checkout -b dev<br><br>$ git branch<br>*dev<br>master</code></pre>
            </div>
        </div>
        
        <div class="question_title">
            <h2>工作中遇到问题总结及解决方案</h2>
            <hr>
        </div>
        <div class="question">
            <h2 class="title">git branch -r 不能显示远程分支问题</h2>
            <p>以jquery版本库为例：当 git clone jq版本库到本地时，git branch -r 可以显示远程分支。当 git remote remove origin 取消与远程版本库的连接，再 git remote add origin &lt;版本库&gt; 添加远程连接，这时 git branch -r 将不再显示远程分支，需要 get fetch 更新远程主机，就可以了</p>
            
        </div>
    </section>
</body>
</html>